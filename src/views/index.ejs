<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>File Uploader</title>
  <link rel="stylesheet" type="text/css" href="/css/styles.css" />
</head>

<body>
  <% if (locals.username) { %>
    <h1>Hi <%= username %>
    </h1>
    <a href="/logout">Logout</a>
    <hr />
    <% if (locals.messages.uploadError) { %>
      <p class="flashErrorMessage"><%= messages.uploadError %></p>
    <% } %>
    <form action="<%= locals.postPath? postPath : '' %>/upload" method="post" enctype="multipart/form-data">
      <label for="document">Upload a file:</label>
      <input type="file" id="document" name="document" accept=".txt, .docx, .pdf, .jpg, .jpeg, .png" />
      <input type="submit" value="Submit">
    </form>
    <form action="<%= locals.postPath? postPath : '' %>/folder" method="post">
      <label for="folderName">Create a folder:</label>
      <input type="text" id="folderName" name="folderName">
      <input type="submit" value="Submit">
    </form>
  <% } %>
  <div class="folderPath">
    <% if (locals.folderPath) { %>
      <% folderPath.map((folder, idx) => { %>
        <% if (idx !==0 ) { %>
          <span>&gt;</span>
        <% } %>
        <a href="<%= folder.isRoot? '/' : `/folders/${folder.id}` %>"><span><%= folder.name %></span></a>
      <% }) %>
    <% } %>
  </div>
  <div class="folders">
    <hr />
    <h4>Folders</h4>
    <% if (locals.folders) { %>
      <% folders.map(folder => {%>
        <a href="folders/<%=folder.id%>"><p><%= folder.name %></p></a>
      <% }) %>
    <% } %>
  </div>
  <div class="files">
    <hr />
    <h4>Files</h4>
    <% if (locals.files) { %>
      <% files.map(file => {%>
        <p onclick="alert('File id is <%= file.id %>')"><%= file.name %></p>
      <% }) %>
    <% } %>
  </div>
</body>

</html>
